--drop table T_EB_Detail;
CREATE TABLE T_EB_Detail(
  	ID int PRIMARY KEY,
  	BANK_NAME  VARCHAR2(10),  --银行简码  
  	ACC_NO  VARCHAR2(30) not null,  --交易主账号
  	ACC_NAME  NVARCHAR2(30),  --交易主账户名
	DEBIT_AMOUNT	NUMBER(19,2),--借
	CREDIT_AMOUNT	NUMBER(19,2),--贷
  	CURRENCY  VARCHAR2(5),  --  交易币别
	TRANS_DATE	TIMESTAMP(6), --交易日期
	ORDER_INDEX	NUMBER(10), --查询时返回顺序号，作为排序依据(如果交易时间只有天)
	REMARK	NVARCHAR2(255),	--备注
  	USE_CODE  NVARCHAR2(50),  --  用途代码
  	USE_DESC  NVARCHAR2(255),  --  用途描述
	BALANCE	NUMBER(19,2), --余额			
 	CUSTOMER_ACC_NO  VARCHAR2(30),  --客户账号
  	CUSTOMER_ACC_NAME  NVARCHAR2(30),  --  客户账户名
  	CUSTOMER_BANK_FULL_NAME NVARCHAR2(50),  -- 客户银行全称
	BANK_BATCH_SEQ_ID  VARCHAR2(20),  --  银行批次号
	RESERVED	NVARCHAR2(1000),--预留字段(JSON串)
	FIELDS_HASH VARCHAR2(64),--关键字段的hash值，用于快束找到旧的记录
	CREATE_TIME  TIMESTAMP(6),  --创建时间
  	UPDATE_TIME  TIMESTAMP(6)  --更新时间 
)
PARTITION BY RANGE (TRANS_DATE) 
(
    PARTITION PARTITION201405 VALUES LESS THAN (to_date('2014-06-01','yyyy-mm-dd')),
    PARTITION PARTITION201406 VALUES LESS THAN (to_date('2014-07-01','yyyy-mm-dd')),
    PARTITION PARTITION201407 VALUES LESS THAN (to_date('2014-08-01','yyyy-mm-dd')),
    PARTITION PARTITION201408 VALUES LESS THAN (to_date('2014-09-01','yyyy-mm-dd')),
    PARTITION PARTITION201409 VALUES LESS THAN (to_date('2014-10-01','yyyy-mm-dd')),
    PARTITION PARTITION201410 VALUES LESS THAN (to_date('2014-11-01','yyyy-mm-dd')),
    PARTITION PARTITION201411 VALUES LESS THAN (to_date('2014-12-01','yyyy-mm-dd')),
    PARTITION PARTITION201412 VALUES LESS THAN (to_date('2015-01-01','yyyy-mm-dd')),
    PARTITION PARTITION201501 VALUES LESS THAN (to_date('2015-02-01','yyyy-mm-dd')),
    PARTITION PARTITION201502 VALUES LESS THAN (to_date('2015-03-01','yyyy-mm-dd')),
    PARTITION PARTITION201503 VALUES LESS THAN (to_date('2015-04-01','yyyy-mm-dd')),
    PARTITION PARTITION201504 VALUES LESS THAN (to_date('2015-05-01','yyyy-mm-dd')),
    PARTITION PARTITION201505 VALUES LESS THAN (to_date('2015-06-01','yyyy-mm-dd')),
    PARTITION PARTITION201506 VALUES LESS THAN (to_date('2015-07-01','yyyy-mm-dd')),
    PARTITION PARTITION201507 VALUES LESS THAN (to_date('2015-08-01','yyyy-mm-dd')),
    PARTITION PARTITION201508 VALUES LESS THAN (to_date('2015-09-01','yyyy-mm-dd')),
    PARTITION PARTITION201509 VALUES LESS THAN (to_date('2015-10-01','yyyy-mm-dd')),
	PARTITION PARTITION201510 VALUES LESS THAN (to_date('2015-11-01','yyyy-mm-dd')),
    PARTITION PARTITION201511 VALUES LESS THAN (to_date('2015-12-01','yyyy-mm-dd')),
    PARTITION PARTITION201512 VALUES LESS THAN (to_date('2016-01-01','yyyy-mm-dd'))
);
CREATE INDEX IDX_DETAIL_ACCNO on T_EB_Detail(ACC_NO);
CREATE INDEX IDX_DETAIL_CACCNO on T_EB_Detail(CUSTOMER_ACC_NO);
CREATE INDEX IDX_DETAIL_TDATE on T_EB_Detail(TRANS_DATE);
CREATE INDEX IDX_DETAIL_TAMNT on T_EB_Detail(DEBIT_AMOUNT);
CREATE INDEX IDX_DETAIL_CAMNT on T_EB_Detail(CREDIT_AMOUNT);
CREATE INDEX IDX_DETAIL_FHASH on T_EB_Detail(FIELDS_HASH);


CREATE SEQUENCE DETAIL_ID_SEQ INCREMENT BY 1 START WITH 1 MAXVALUE 999999999999999999 NOCYCLE NOCACHE;
 